{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport LoginView from '../views/LoginView.vue';\nimport RegisterView from '../views/RegisterView.vue';\nimport store from '../store';\nimport * as common from \"../assets/common.js\";\nimport StudentHome from '../views/StudentHome.vue';\nimport StudentCreateTicket from '../views/StudentCreateTicket.vue';\nimport StudentMyTickets from '../views/StudentMyTickets.vue';\nimport CommonFAQs from '../views/CommonFAQs.vue';\nimport SupportHome from '../views/SupportHome.vue';\nimport SupportMyTickets from '../views/SupportMyTickets.vue';\nimport AdminHome from '../views/AdminHome.vue';\nimport AdminCreateFAQ from '../views/AdminCreateFAQ.vue';\nimport AdminValidateUsers from '../views/AdminValidateUsers.vue';\nimport AppHomeView from '../views/AppHomeView.vue';\nimport UserProfile from '../views/UserProfile.vue';\nVue.use(VueRouter);\nconst routes = [{\n  path: '/',\n  alias: '/home',\n  name: 'AppHomeView',\n  component: AppHomeView\n}, {\n  path: '/login',\n  name: 'LoginView',\n  component: LoginView\n}, {\n  path: '/register',\n  name: 'RegisterView',\n  component: RegisterView\n}, {\n  path: '/student-home',\n  name: 'StudentHome',\n  component: StudentHome\n}, {\n  path: '/student-create-ticket',\n  name: 'StudentCreateTicket',\n  component: StudentCreateTicket\n}, {\n  path: '/student-my-tickets',\n  name: 'StudentMyTickets',\n  component: StudentMyTickets\n}, {\n  path: '/common-faqs',\n  name: 'CommonFAQs',\n  component: CommonFAQs\n}, {\n  path: '/user-profile',\n  name: 'UserProfile',\n  component: UserProfile\n}, {\n  path: '/support-home',\n  name: 'SupportHome',\n  component: SupportHome\n}, {\n  path: '/support-my-tickets',\n  name: 'SupportMyTickets',\n  component: SupportMyTickets\n}, {\n  path: '/admin-home',\n  name: 'AdminHome',\n  component: AdminHome\n}, {\n  path: '/admin-validate-users',\n  name: 'AdminValidateUsers',\n  component: AdminValidateUsers\n}, {\n  path: '/admin-create-faq',\n  name: 'AdminCreateFAQ',\n  component: AdminCreateFAQ\n}, {\n  path: '*',\n  redirect: '/'\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  // redirect to login page if not logged in and trying to access a restricted page\n  const publicPages = ['/login', '/register', '/', '/home'];\n  const authRequired = !publicPages.includes(to.path);\n  if (!store.getters.get_logged_status) {\n    store.commit('initialiseStore');\n  }\n  const logged_status = store.getters.get_logged_status;\n  if (authRequired && !logged_status) {\n    alert(\"Token expired. Please log in again.\");\n    return next('/login');\n  }\n  if (authRequired && logged_status) {\n    const role = store.state.user.role;\n    if (role === 'student' && common.STUDENT_ROUTES.includes(to.path) || role === 'support' && common.SUPPORT_ROUTES.includes(to.path) || role === 'admin' && common.ADMIN_ROUTES.includes(to.path)) {\n      return next();\n    } else {\n      alert(\"You don't have access to this page.\");\n      return next(`/${role}-home`);\n    }\n  }\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","LoginView","RegisterView","store","common","StudentHome","StudentCreateTicket","StudentMyTickets","CommonFAQs","SupportHome","SupportMyTickets","AdminHome","AdminCreateFAQ","AdminValidateUsers","AppHomeView","UserProfile","use","routes","path","alias","name","component","redirect","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","publicPages","authRequired","includes","getters","get_logged_status","commit","logged_status","alert","role","state","user","STUDENT_ROUTES","SUPPORT_ROUTES","ADMIN_ROUTES"],"sources":["/mnt/d/D/IIT Madras/SE/Project/code/code/frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue';\r\nimport VueRouter from 'vue-router';\r\nimport LoginView from '../views/LoginView.vue';\r\nimport RegisterView from '../views/RegisterView.vue';\r\nimport store from '../store';\r\nimport * as common from \"../assets/common.js\";\r\nimport StudentHome from '../views/StudentHome.vue';\r\nimport StudentCreateTicket from '../views/StudentCreateTicket.vue';\r\nimport StudentMyTickets from '../views/StudentMyTickets.vue';\r\nimport CommonFAQs from '../views/CommonFAQs.vue';\r\nimport SupportHome from '../views/SupportHome.vue';\r\nimport SupportMyTickets from '../views/SupportMyTickets.vue';\r\nimport AdminHome from '../views/AdminHome.vue';\r\nimport AdminCreateFAQ from '../views/AdminCreateFAQ.vue';\r\nimport AdminValidateUsers from '../views/AdminValidateUsers.vue';\r\nimport AppHomeView from '../views/AppHomeView.vue';\r\nimport UserProfile from '../views/UserProfile.vue';\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    alias: '/home',\r\n    name: 'AppHomeView',\r\n    component: AppHomeView,\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'LoginView',\r\n    component: LoginView,\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'RegisterView',\r\n    component: RegisterView,\r\n  },\r\n  {\r\n    path: '/student-home',\r\n    name: 'StudentHome',\r\n    component: StudentHome,\r\n  },\r\n  {\r\n    path: '/student-create-ticket',\r\n    name: 'StudentCreateTicket',\r\n    component: StudentCreateTicket,\r\n  },\r\n  {\r\n    path: '/student-my-tickets',\r\n    name: 'StudentMyTickets',\r\n    component: StudentMyTickets,\r\n  },\r\n  {\r\n    path: '/common-faqs',\r\n    name: 'CommonFAQs',\r\n    component: CommonFAQs,\r\n  },\r\n  {\r\n    path: '/user-profile',\r\n    name: 'UserProfile',\r\n    component: UserProfile,\r\n  },\r\n  {\r\n    path: '/support-home',\r\n    name: 'SupportHome',\r\n    component: SupportHome,\r\n  },\r\n  {\r\n    path: '/support-my-tickets',\r\n    name: 'SupportMyTickets',\r\n    component: SupportMyTickets,\r\n  },\r\n  {\r\n    path: '/admin-home',\r\n    name: 'AdminHome',\r\n    component: AdminHome,\r\n  },\r\n  {\r\n    path: '/admin-validate-users',\r\n    name: 'AdminValidateUsers',\r\n    component: AdminValidateUsers,\r\n  },\r\n  {\r\n    path: '/admin-create-faq',\r\n    name: 'AdminCreateFAQ',\r\n    component: AdminCreateFAQ,\r\n  },\r\n  {\r\n    path: '*',\r\n    redirect: '/',\r\n  },\r\n];\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes,\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  // redirect to login page if not logged in and trying to access a restricted page\r\n  const publicPages = ['/login', '/register', '/', '/home'];\r\n  const authRequired = !publicPages.includes(to.path);\r\n  if (!store.getters.get_logged_status) {\r\n    store.commit('initialiseStore');\r\n  }\r\n  const logged_status = store.getters.get_logged_status;\r\n\r\n  if (authRequired && !logged_status) {\r\n    alert(\"Token expired. Please log in again.\");\r\n    return next('/login');\r\n  }\r\n  if (authRequired && logged_status) {\r\n    const role = store.state.user.role;\r\n\r\n    if (((role === 'student') && (common.STUDENT_ROUTES.includes(to.path)))\r\n      || ((role === 'support') && (common.SUPPORT_ROUTES.includes(to.path)))\r\n      || ((role === 'admin') && (common.ADMIN_ROUTES.includes(to.path)))) {\r\n      return next();\r\n    }\r\n    else {\r\n      alert(\"You don't have access to this page.\");\r\n      return next(`/${role}-home`);\r\n    }\r\n  }\r\n  next();\r\n})\r\n\r\nexport default router;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}